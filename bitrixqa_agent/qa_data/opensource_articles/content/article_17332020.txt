Категория: Битрикс24

ТЕМА: Обновление PHP до версии 8.x в коробочных версиях Битрикс24

ПРОБЛЕМА:
Начиная с 01.02.2023, поддержка продуктов "1С-Битрикс" будет ограничена для версий PHP ниже 8.1. Использование устаревшей версии PHP 7.x (или ниже) означает отсутствие исправлений ошибок безопасности и функционала, а также невозможность установки обновлений платформы и решений.

РЕШЕНИЕ:
1.  Создать резервную копию: Сделайте полную резервную копию вашей установки "1С-Битрикс" или всего сервера.
2.  Обновить ядро и модули: Перейдите в "Настройки" > "Marketplace" > "Обновление платформы" и установите последние версии ядра и модулей.
3.  Обновить сторонние решения: В разделе "Настройки" > " Marketplace" > "Обновление решений" установите последние версии всех сторонних модулей.
4.  Обновить PHP: Обновите версию PHP на вашем сервере до 8.1 или выше. Если используется VMBitrix, выполните обновление через меню VMBitrix (8. Update PHP and MySQL).
5.  Повторно проверить обновления: Убедитесь, что после обновления PHP установлены все последние обновления платформы и решений.

ВАЖНО:
1.   PHP 7.x устарел: Эта версия больше не поддерживается и не получает исправлений безопасности.
2.   Обновления платформы: Без обновления PHP до 8.1 установка обновлений "1С-Битрикс" будет невозможна.
3.   Поэтапное обновление: Обновление PHP должно проводиться поэтапно, с предварительным обновлением платформы и решений.
4.   Обращение в поддержку: При возникновении ошибок обращайтесь либо в "Поддержку24" (для стандартных модулей и модулей с префиксом `bitrix.*`), либо к разработчикам сторонних модулей (информация на странице модуля в Маркетплейсе).

ТЕХНИЧЕСКИЕ ДЕТАЛИ:
1.    VMBitrix: Для обновления PHP в VMBitrix используйте опцию "8. Update PHP and MySQL" в меню управления серверами.
2.   Исправление ошибок: Частые ошибки связаны с несовместимостью сторонних модулей или некорректной конфигурацией PHP.
3.    *   Ошибка описания модуля "name.module": В файле `/bitrix/modules/<имя.модуля>/install/index.php` замените `function <имя.модуля>()` на `function __construct()`.
4.    *   Выполнение скрипта с ошибкой: Включите расширенный вывод ошибок в файле `/bitrix/.settings.php` (`'debug' => true,`).
5.    *   $GLOBALS can only be modified: Ошибка исправлена в обновлении главного модуля `main` версии 22.100.0. Необходимо вернуться на PHP 7.x, обновить платформу и модули, затем снова перейти на PHP 8.x.
6.    *   TypeError (non-static method cannot be called statically): В коде метода (`e.g., AdminContextMenuShow()`) объявите функцию как статическую (`public static function ...`).
7.    *   Белый экран: Проверьте параметр `short_open_tag` в конфигурации PHP, он должен быть установлен в `On`. Также проверьте логи веб-сервера.

СВЯЗАННЫЕ ВОПРОСЫ:
1.   Как создать резервную копию "1С-Битрикс"?
2.   Где найти контакты разработчиков сторонних модулей?
3.   Где находится файл `.settings.php`?
4.   Как включить вывод ошибок PHP?
5.   Какие требования к версии PHP для "1С-Битрикс"?