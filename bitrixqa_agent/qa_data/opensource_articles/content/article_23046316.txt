Категория: Битрикс24

ТЕМА: Диагностика и устранение проблем с роботами и бизнес-процессами в Битрикс24

ПРОБЛЕМА:
В Битрикс24 некорректно работают роботы и бизнес-процессы. Пользователи сталкиваются с различными ошибками, такими как отсутствие сотрудника в истории изменений, игнорирование внесенных правок, некорректные данные при работе с элементами смарт-процессов, проблемы с условиями временных диапазонов, несрабатывание роботов при создании через вебхуки, неопределенный порядок запуска процессов, ошибки при изменении поля "Ответственный", не отображение параметров процесса, ошибки отправки писем и некорректная работа с датой последней коммуникации.

РЕШЕНИЕ:
1.  Отсутствие сотрудника в истории изменений: В действиях "Изменение документов" (бизнес-процессы) и "Изменить элемент" (роботы) в поле "Изменять от имени" укажите "Кем изменен".
2.  Игнорирование правок: Завершите активный процесс и запустите новый, чтобы применить изменения. Для остановки удаленного робота или бизнес-процесса, завершите его непосредственно в карточке элемента или в общем списке бизнес-процессов.
3.  Работа с элементами смарт-процессов: Убедитесь, что в настройках смарт-процесса включены роботы, триггеры и дизайнер бизнес-процессов. Настраивайте фильтры в роботах "Получить информацию об элементе CRM" по уникальным полям, например, по ID элемента.
4.  Условие "Между" для времени: Разбивайте временной диапазон, охватывающий разные дни, на два условия в рамках одного дня. Например, для диапазона 20:00 - 08:00 настройте два условия: "между 20:00 - 23:59" и "между 00:00 - 8:00".
5.  Срабатывание робота с условием при создании через вебхук: Настройте время выполнения робота "Изменить элемент" через 10 минут после срабатывания, чтобы вебхук успел заполнить поля.
6.  Порядок запуска: По умолчанию бизнес-процессы запускаются раньше роботов при одинаковых условиях.
7.  Изменение поля "Ответственный": Во всех роботах и бизнес-процессах, изменяющих данные элемента, в поле "Изменять от имени" укажите роль "Кем изменен", чтобы избежать конфликтов.
8.  Не отображение параметров действий и переменных: Проверьте переменные, условия и действия на наличие специальных символов (>, <, =, +, @, #) и удалите или замените их.
9.  Ошибка "Свойство «Отправитель» не указано": Убедитесь, что у пользователя-отправителя подключен e-mail в разделе "Почта", указан контактный e-mail в профиле, и адреса полностью совпадают (включая регистр).
10. Робот не срабатывает по "Дата последней коммуникации: открытые линии": Закройте диалог в открытой линии, чтобы дата и время корректно обновились и робот смог правильно рассчитать срок.

ВАЖНО:
1.   Для корректного отслеживания изменений в истории CRM, поле "Изменять от имени" в настроенных роботах и бизнес-процессах должно быть заполнено.
2.   Изменения в уже запущенных роботах и бизнес-процессах не применяются автоматически. Необходимо перезапускать процессы.
3.   При работе с элементами смарт-процессов важно включать соответствующие настройки и использовать уникальные идентификаторы для фильтрации.
4.   Специальные символы в переменных и действиях бизнес-процессов могут блокироваться фильтром безопасности.
5.   Корректность настройки почтового адреса отправителя критична для отправки писем через автоматизацию.
6.   Для корректного срабатывания роботов по дате последней коммуникации, диалог в открытой линии должен быть завершен.

ТЕХНИЧЕСКИЕ ДЕТАЛИ:
1.   Действия: "Изменение документов" (БП), "Изменить элемент" (робот), "Получить информацию об элементе CRM" (робот).
2.   Условия запуска роботов: "Повторная сделка равно Да".
3.   Время выполнения робота: "через 10 минут".
4.   Настройка времени в роботах: разбиение диапазона на два условия в рамках одного дня.
5.   Почтовые интеграции: подключение e-mail в разделе "Почта", указание контактного e-mail в профиле.
6.   Открытые линии: поле "Дата последней коммуникации".

СВЯЗАННЫЕ ВОПРОСЫ:
1.   Как настроить поле "Изменять от имени"?
2.   Как завершить активный бизнес-процесс?
3.   Как включить роботов и триггеры для смарт-процессов?
4.   Как настроить фильтр по ID элемента в роботе?
5.   Какие специальные символы могут вызывать ошибки в бизнес-процессах?
6.   Как проверить и настроить почту отправителя?