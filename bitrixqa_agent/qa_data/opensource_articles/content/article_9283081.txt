Категория: Битрикс24

ТЕМА: Запуск заданий открытых линий из cron в Битрикс24
ПРОБЛЕМА:
Неэффективная работа или задержки в выполнении автоматических заданий модуля "Открытые линии", таких как распределение диалогов, отправка почты, автозакрытие диалогов и уведомление о недоступности оператора. Это может быть связано с некорректным режимом работы заданий.

РЕШЕНИЕ:
Рекомендуется использовать режим работы "Cron" для заданий открытых линий. Для этого необходимо:
1. В административном интерфейсе модуля "Открытые линии" в настройках переключить "Режим работы" на "Cron".
2. На сервере настроить запуск по cron-у файла `/bitrix/tools/imopenlines/agents.php` каждые 60 секунд.
Существуют также два других режима, основанных на агентах Bitrix (запуск на хитах и запуск на cron), но они не рекомендуются из-за потенциальных задержек и конфликтов с другими агентами.

ВАЖНО:
Режим "Cron" является рекомендуемым и обеспечивает более стабильную работу заданий открытых линий.
Лимит времени выполнения задания распределения диалогов в режиме "Cron" составляет 180 секунд.
Задания автоматической отправки сообщения о недоступности операторов также используют этот лимит времени.
Задания автоматического закрытия диалога и отправки почтовых сообщений обрабатывают по 100 элементов за один проход.

ТЕХНИЧЕСКИЕ ДЕТАЛИ:
Файл для запуска по cron: `/bitrix/tools/imopenlines/agents.php`
Периодичность запуска cron: каждые 60 секунд.
Возможные режимы работы: Агенты Bitrix (на хитах, на cron), Cron.

СВЯЗАННЫЕ ВОПРОСЫ:
Как настроить cron на сервере?
Какие существуют типы заданий в модуле "Открытые линии"?
В чем отличие режимов работы "Агенты Bitrix" и "Cron"?
Каковы лимиты выполнения для различных задач в режиме "Cron"?